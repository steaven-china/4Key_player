var m=Object.defineProperty;var M=(s,a,e)=>a in s?m(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var r=(s,a,e)=>M(s,typeof a!="symbol"?a+"":a,e);class y{constructor(){r(this,"hitEffects",[]);r(this,"ambientParticles",[])}initAmbient(a,e,t){this.ambientParticles=[];for(let i=0;i<a;i++)this.ambientParticles.push({x:Math.random()*e,y:Math.random()*t,r:1.5+Math.random()*2.5,alpha:.1+Math.random()*.15,vx:(Math.random()-.5)*.15,vy:-.05-Math.random()*.35})}updateAmbient(a,e){for(const t of this.ambientParticles)t.x+=t.vx,t.y+=t.vy,t.y<-10&&(t.x=Math.random()*a,t.y=e+10,t.vx=(Math.random()-.5)*.15,t.vy=-.05-Math.random()*.15,t.r=1.5+Math.random()*2.5,t.alpha=.1+Math.random()*.15),(t.x<-10||t.x>a+10)&&(t.vx*=-1);return this.ambientParticles}createHit(a,e,t,i){const h=[];for(let c=0;c<30;c++){const d=-Math.PI/2+(Math.random()-.5)*(Math.PI/2),f=.8*Math.sqrt(Math.random()),l=Math.cos(d)*f*.8,p=Math.sin(d)*f;h.push({x:a,y:e,vx:l,vy:p,life:1.5,decay:.02+Math.random()*.02,size:i/2-5+Math.random()*7,color:t})}return h.push({x:a,y:e,vx:-.2,vy:0,life:10,decay:.6,size:Math.random()*10,color:t,isExplosion:!0}),this.hitEffects.push(...h),this.hitEffects}updateHit(a){const e=[];for(const t of this.hitEffects)t.x+=t.vx,t.y+=t.vy,t.vy+=.05,t.life-=t.decay,t.isExplosion?t.size*=.9:t.size*=.93,t.life>0&&t.y>30&&t.y<a+30&&e.push(t);return this.hitEffects=e,this.hitEffects}clearHit(){return this.hitEffects=[],this.hitEffects}}const n=new y;self.onmessage=function(s){const{type:a,data:e}=s.data;switch(a){case"initAmbient":n.initAmbient(e.count,e.width,e.height),self.postMessage({type:"ambientInit",data:n.ambientParticles});break;case"updateAmbient":const t=n.updateAmbient(e.width,e.height);self.postMessage({type:"ambientUpdate",data:t});break;case"createHit":const i=n.createHit(e.x,e.y,e.color,e.laneWidth);self.postMessage({type:"hitCreate",data:i});break;case"updateHit":const o=n.updateHit(e.height);self.postMessage({type:"hitUpdate",data:o});break;case"clearHit":const h=n.clearHit();self.postMessage({type:"hitUpdate",data:h});break}};
//# sourceMappingURL=particleWorker-BbBKram7.js.map
